!function(){"use strict";function e(e,r,s){const a=document.getElementById("name").value,o=document.getElementById("email").value,c=document.getElementById("subject").value,n=document.getElementById("message").value;fetch(r,{method:"POST",body:JSON.stringify({name:a,email:o,subject:c,message:n}),headers:{"X-Requested-With":"XMLHttpRequest"}}).then((e=>{if(e.ok)return e.text();throw new Error(`${e.status} ${e.statusText} ${e.url}`)})).then((t=>{if(e.querySelector(".loading").classList.remove("d-block"),'{"response":"Message created"}'!==t.trim())throw new Error(t||"Form submission failed and no error message returned from: "+r);e.querySelector(".sent-message").classList.add("d-block"),e.reset()})).catch((r=>{t(e,r)}))}function t(e,t){e.querySelector(".loading").classList.remove("d-block"),e.querySelector(".error-message").innerHTML=t,e.querySelector(".error-message").classList.add("d-block")}document.querySelectorAll(".php-email-form").forEach((function(r){r.addEventListener("submit",(function(r){r.preventDefault();let s=this,a=s.getAttribute("action"),o=s.getAttribute("data-recaptcha-site-key");if(!a)return void t(s,"The form action property is not set!");s.querySelector(".loading").classList.add("d-block"),s.querySelector(".error-message").classList.remove("d-block"),s.querySelector(".sent-message").classList.remove("d-block");let c=new FormData(s);o?"undefined"!=typeof grecaptcha?grecaptcha.ready((function(){try{grecaptcha.execute(o,{action:"php_email_form_submit"}).then((t=>{c.set("recaptcha-response",t),e(s,a,c)}))}catch(e){t(s,e)}})):t(s,"The reCaptcha javascript API url is not loaded!"):e(s,a,c)}))}))}();
